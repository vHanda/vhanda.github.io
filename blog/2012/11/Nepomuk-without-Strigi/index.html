<!doctype html><html dir=ltr lang=en data-theme class=html><head><title>Vishesh Handa
|
Nepomuk without Strigi</title><meta charset=utf-8><meta name=generator content="Hugo 0.96.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Vishesh Handa"><meta name=description content="
      Haven't figured out a description


    "><link rel=stylesheet href=/scss/main.min.5259d55db7b9c675f751f0865411bd84a410f3ffcb5105b8fc00b22fcb739309.css integrity="sha256-UlnVXbe5xnX3UfCGVBG9hKQQ8//LUQW4/ACyL8tzkwk=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.69685904d5c2a0c6258d03c207b778c10466edf6cea928cc0164c376b0ad0930.css integrity="sha256-aWhZBNXCoMYljQPCB7d4wQRm7fbOqSjMAWTDdrCtCTA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.6d585e78d28cce1200d39fb133c92ed83df01738da721d0f48fb6eac62d24e04.css integrity="sha256-bVheeNKMzhIA05+xM8ku2D3wFzjach0PSPturGLSTgQ=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.6b00d96498d59caa0dbcf9b49d30d821915291f2ceb0e19248523c8607ff43fa.css integrity="sha256-awDZZJjVnKoNvPm0nTDYIZFSkfLOsOGSSFI8hgf/Q/o=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=http://vhanda.in/blog/2012/11/Nepomuk-without-Strigi/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.560a26330d27ff44a44e83b53cd07a95d4230a65930d31c5c76a8d481e5b35bf.js integrity="sha256-VgomMw0n/0SkToO1PNB6ldQjCmWTDTHFx2qNSB5bNb8=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Nepomuk without Strigi"><meta name=twitter:description content="Strigi has always been a large part of Nepomuk. In fact a lot of users still do not understand the difference between the two. It&rsquo;s quite common to see bug reports saying mentioning &ldquo;Strigi/Nepomuk&rdquo;. Lots of blog posts do the same.
Strigi consists of a number of different parts. In Nepomuk we just used to use libstreams and libstreamanalyzer. These were pure C++ libraries. The great thing about Strigi is that it is based on streams, instead of files."><meta property="og:title" content="Nepomuk without Strigi"><meta property="og:description" content="Strigi has always been a large part of Nepomuk. In fact a lot of users still do not understand the difference between the two. It&rsquo;s quite common to see bug reports saying mentioning &ldquo;Strigi/Nepomuk&rdquo;. Lots of blog posts do the same.
Strigi consists of a number of different parts. In Nepomuk we just used to use libstreams and libstreamanalyzer. These were pure C++ libraries. The great thing about Strigi is that it is based on streams, instead of files."><meta property="og:type" content="article"><meta property="og:url" content="http://vhanda.in/blog/2012/11/Nepomuk-without-Strigi/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2012-11-07T21:36:55+00:00"><meta property="article:modified_time" content="2012-11-07T21:36:55+00:00"><meta property="og:site_name" content="Vishesh Handa"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"blog","name":"Nepomuk without Strigi","headline":"Nepomuk without Strigi","alternativeHeadline":"","description":"
      
        Strigi has always been a large part of Nepomuk. In fact a lot of users still do not understand the difference between the two. It\u0026rsquo;s quite common to see bug reports saying mentioning \u0026ldquo;Strigi\/Nepomuk\u0026rdquo;. Lots of blog posts do the same.\nStrigi consists of a number of different parts. In Nepomuk we just used to use libstreams and libstreamanalyzer. These were pure C\u002b\u002b libraries. The great thing about Strigi is that it is based on streams, instead of files.


      


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/vhanda.in\/blog\/2012\/11\/Nepomuk-without-Strigi\/"},"author":{"@type":"Person","name":"Vishesh Handa"},"creator":{"@type":"Person","name":"Vishesh Handa"},"accountablePerson":{"@type":"Person","name":"Vishesh Handa"},"copyrightHolder":{"@type":"Person","name":"Vishesh Handa"},"copyrightYear":"2012","dateCreated":"2012-11-07T21:36:55.00Z","datePublished":"2012-11-07T21:36:55.00Z","dateModified":"2012-11-07T21:36:55.00Z","publisher":{"@type":"Organization","name":"Vishesh Handa","url":"http://vhanda.in","logo":{"@type":"ImageObject","url":"http:\/\/vhanda.infavicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"http:\/\/vhanda.in\/blog\/2012\/11\/Nepomuk-without-Strigi\/","wordCount":"487","genre":[],"keywords":["planetkde","nepomuk"]}</script></head><body class="body theme--light"><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/profile.jpg alt="profile picture"><h1 class=sidebar__introduction-title><a href=/>Vishesh Handa</a></h1><div class=sidebar__introduction-description><p>Haven't figured out a description</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://www.linkedin.com/in/visheshhanda/ rel=me aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://github.com/vhanda rel=me aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://twitter.com/visheshhanda rel=me aria-label=Twitter title=Twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:me@vhanda.in rel=me aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
Vishesh Handa
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js integrity="sha256-o/0GOK2k487Ch+SaYEtKgoz+8zpmmv5guWV1dh//XPM=" crossorigin=anonymous></script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>Nepomuk Without Strigi</h1><p>Strigi has always been a large part of Nepomuk. In fact a lot of users
still do not understand the difference between the two. It&rsquo;s quite
common to see bug reports saying mentioning &ldquo;Strigi/Nepomuk&rdquo;. Lots of
blog posts do the same.</p><p>Strigi consists of a number of different parts. In Nepomuk we just used
to use libstreams and libstreamanalyzer. These were pure C++ libraries.
The great thing about Strigi is that it is based on streams, instead of
files. So one can theoretically even extract metadata from the album
image embedded inside an audio files. It&rsquo;s very powerful. Unfortunately,
everything comes at a price, and this increased &ldquo;awesomeness&rdquo; comes with
increased complexity. Additionally with it being a pure C++ ( no Qt or
KDE ) library, contributing is harder.</p><p>For 4.10, We decided to take a very drastic change and move away from
Strigi. There are a large number of <a href=http://mail.kde.org/pipermail/nepomuk/2012-September/003167.html>reasons</a> for doing so. Apart from
the technical ones there was also an economic one - A large code base
like Strigi is difficult to maintain and comes with a lot of added
complexity.</p><p>Our own solution is based only on files (not streams) thereby making it
a lot simpler. It directly uses the Nepomuk and KDE libraries, thereby
making integration very simple. Integrating Strigi in Nepomuk required a
lot of code.</p><p>This new file indexer currently resides in the nepomuk-core repository
and does not have a public interface. I&rsquo;m currently still debating if it
should be public for 4.10. Write about if it gets a public interface,
one can theoretically write plugins in other languages.</p><p>So far we have 5 indexers -</p><ul><li>Image File - Based on Exiv2</li><li>Video Files - Based of ffmpeg (We might move to gstreamer)</li><li>Audio Files - Taglib</li><li>PDF Files - Poppler</li><li>Plain Text files</li></ul><p>Writing file indexers for Nepomuk is now very simple. In fact these 5
indexers combined are just 500 lines. Here is the important part of the
plain text extractor -</p><pre><code>QTextStream ts( &amp;file );
QString contents = ts.readAll();

int characters = contents.length();
int lines = contents.count( QChar('\n') );
int words = contents.count( QRegExp(&quot;\\b\\w+\\b&quot;) );

SimpleResource fileRes( resUri );
fileRes.addType( NFO::PlainTextDocument() );
fileRes.addProperty( NIE::plainTextContent(), contents );
fileRes.addProperty( NFO::wordCount(), words );
fileRes.addProperty( NFO::lineCount(), lines );
fileRes.addProperty( NFO::characterCount(), characters );
</code></pre><p>The current file indexers cover most of the commonly used files, but
they still need to be polished. So, if you&rsquo;re interested in contributing
to Nepomuk, here is your chance.</p><p>I&rsquo;ve managed to <a href=http://community.kde.org/Projects/Nepomuk/FileIndexing>catalog</a> some of the different files that I know we
support. Our current indexers support many more formats, they just need
to be properly tested.</p><p>If you&rsquo;re interested in helping, you can start by running nepomuk-core,
and manually indexing the different file formats and updating this
<a href=http://community.kde.org/Projects/Nepomuk/FileIndexing>page</a>. If you&rsquo;re a developer, feel free to checkout
nepomuk-core, and start writing extractors. I&rsquo;ve written a simple
<a href=http://techbase.kde.org/Projects/Nepomuk/IndexingPlugin>guide</a>.</p><p>Btw, all of this Nepomuk awesomeness is powered by Blue Systems!</p></div><div class=post__footer><span><a class=tag href=/tags/planetkde/>planetkde</a><a class=tag href=/tags/nepomuk/>nepomuk</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
Vishesh Handa
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js integrity="sha256-o/0GOK2k487Ch+SaYEtKgoz+8zpmmv5guWV1dh//XPM=" crossorigin=anonymous></script></body></html>