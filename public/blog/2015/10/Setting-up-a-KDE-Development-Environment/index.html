<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
  class="html"
><head>
  <title>
    
      Vishesh Handa
        |
        Setting up a KDE Development Environment


      


    
  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.95.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Vishesh Handa" />
  <meta
    name="description"
    content="
      Haven&#39;t figured out a description


    "
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.5259d55db7b9c675f751f0865411bd84a410f3ffcb5105b8fc00b22fcb739309.css"
      integrity="sha256-UlnVXbe5xnX3UfCGVBG9hKQQ8//LUQW4/ACyL8tzkwk="
      crossorigin="anonymous"
      type="text/css"
    />

  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css"
    integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.69685904d5c2a0c6258d03c207b778c10466edf6cea928cc0164c376b0ad0930.css"
    integrity="sha256-aWhZBNXCoMYljQPCB7d4wQRm7fbOqSjMAWTDdrCtCTA="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.6d585e78d28cce1200d39fb133c92ed83df01738da721d0f48fb6eac62d24e04.css"
    integrity="sha256-bVheeNKMzhIA05&#43;xM8ku2D3wFzjach0PSPturGLSTgQ="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.6b00d96498d59caa0dbcf9b49d30d821915291f2ceb0e19248523c8607ff43fa.css"
    integrity="sha256-awDZZJjVnKoNvPm0nTDYIZFSkfLOsOGSSFI8hgf/Q/o="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

  <link rel="canonical" href="http://vhanda.in/blog/2015/10/Setting-up-a-KDE-Development-Environment/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.560a26330d27ff44a44e83b53cd07a95d4230a65930d31c5c76a8d481e5b35bf.js"
      integrity="sha256-VgomMw0n/0SkToO1PNB6ldQjCmWTDTHFx2qNSB5bNb8="
      crossorigin="anonymous"
    ></script>

  

  


  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Setting up a KDE Development Environment"/>
<meta name="twitter:description" content="Season of KDE is about to start, and I&rsquo;ve been getting a number of emails with students struggling to setup a development environment. For KDE, it isn&rsquo;t quite trivial.
While there are multiple ways to setup a development environment, I&rsquo;m going to go through how mine functions. I know many developers who have a similar setup.
Step 1 - Choose your distribution I develop exclusively on Linux, so do most KDE developers."/>



  
  <meta property="og:title" content="Setting up a KDE Development Environment" />
<meta property="og:description" content="Season of KDE is about to start, and I&rsquo;ve been getting a number of emails with students struggling to setup a development environment. For KDE, it isn&rsquo;t quite trivial.
While there are multiple ways to setup a development environment, I&rsquo;m going to go through how mine functions. I know many developers who have a similar setup.
Step 1 - Choose your distribution I develop exclusively on Linux, so do most KDE developers." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://vhanda.in/blog/2015/10/Setting-up-a-KDE-Development-Environment/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2015-10-22T00:13:11+00:00" />
<meta property="article:modified_time" content="2015-10-22T00:13:11+00:00" /><meta property="og:site_name" content="Vishesh Handa" />




  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "blog",
        "name": "Setting up a KDE Development Environment",
        "headline": "Setting up a KDE Development Environment",
        "alternativeHeadline": "",
        "description": "
      
        Season of KDE is about to start, and I\u0026rsquo;ve been getting a number of emails with students struggling to setup a development environment. For KDE, it isn\u0026rsquo;t quite trivial.\nWhile there are multiple ways to setup a development environment, I\u0026rsquo;m going to go through how mine functions. I know many developers who have a similar setup.\nStep 1 - Choose your distribution I develop exclusively on Linux, so do most KDE developers.


      


    ",
        "inLanguage": "en-us",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/vhanda.in\/blog\/2015\/10\/Setting-up-a-KDE-Development-Environment\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Vishesh Handa"
        },
        "creator" : {
            "@type": "Person",
            "name": "Vishesh Handa"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Vishesh Handa"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Vishesh Handa"
        },
        "copyrightYear" : "2015",
        "dateCreated": "2015-10-22T00:13:11.00Z",
        "datePublished": "2015-10-22T00:13:11.00Z",
        "dateModified": "2015-10-22T00:13:11.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Vishesh Handa",
            "url": "http://vhanda.in",
            "logo": {
                "@type": "ImageObject",
                "url": "http:\/\/vhanda.infavicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
      ]

    ,
        "url" : "http:\/\/vhanda.in\/blog\/2015\/10\/Setting-up-a-KDE-Development-Environment\/",
        "wordCount" : "1193",
        "genre" : [ ],
        "keywords" : [ 
      
      "planetkde"

    ]
    }
  </script>



</head>
<body
    
      class="body theme--light"

    
  >
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"

        
      ><div
  class="sidebar
    animated fadeInDown

  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/blog/images/2015/08/16/vhanda.jpg"
        alt="profile picture"
      />
      <h1 class="sidebar__introduction-title">
        <a href="/">Vishesh Handa</a>
      </h1>
      <div class="sidebar__introduction-description">
        <p>Haven't figured out a description</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a href="https://www.linkedin.com/in/visheshhanda/" rel="me" aria-label="Linkedin" title="Linkedin">
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a href="https://github.com/vhanda" rel="me" aria-label="GitHub" title="GitHub">
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a href="https://twitter.com/visheshhanda" rel="me" aria-label="Twitter" title="Twitter">
            <i class="fab fa-twitter fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a href="mailto:me@vhanda.in" rel="me" aria-label="e-mail" title="e-mail">
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Vishesh Handa
        2022


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js"
    integrity="sha256-o/0GOK2k487Ch&#43;SaYEtKgoz&#43;8zpmmv5guWV1dh//XPM="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main
        
          class="wrapper__main"

        
      >
        <header class="header"><div
  class="
    animated fadeInDown

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>

      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown

    "
  >
    
    <div class="post__content">
      <h1>Setting Up a KDE Development Environment</h1>
      <p><a href="https://dot.kde.org/2015/10/08/season-kde-2015-now-open">Season of KDE</a> is about to start, and I&rsquo;ve been getting a number of emails with students struggling to setup a development environment. For KDE, it isn&rsquo;t quite trivial.</p>
<p>While there are multiple ways to setup a development environment, I&rsquo;m going to go through how mine functions. I know many developers who have a similar setup.</p>
<h3 id="step-1---choose-your-distribution">Step 1 - Choose your distribution</h3>
<p>I develop exclusively on Linux, so do most KDE developers. While some parts of KDE do function on OSX and Windows, that&rsquo;s not what most of us use. So pick your favorite Linux distribution.</p>
<p>In general, I find distributions which follow a rolling release to be easier to work with. My favorite is <a href="https://www.archlinux.org/">Arch Linux</a>. If you&rsquo;re new to Linux, it can be a little daunting, but I do recommend it for development.</p>
<h3 id="step-2---install-basic-tools">Step 2 - Install basic tools</h3>
<p>In order to work on most KDE projects you need the following tools -</p>
<ul>
<li>A C++ compiler (Clang is awesome)</li>
<li>CMake</li>
<li>Ninja</li>
<li>Git</li>
</ul>
<p>Install these using your package manager. Ninja isn&rsquo;t required. But my scripts use it, and I like ninja.</p>
<h3 id="step-3---the-basic-environment">Step 3 - The basic environment</h3>
<p>Before I start with how my environment works, here is a little mumbo jumbo which you can skip if you don&rsquo;t care. Why does one need a build environment? You can just compile the project you want, install it as root and run it. The reason is so that your main system is isolated from your root system. It makes development easier as your environment can have a different version than your distribution, and it&rsquo;s much safer, since it is harder to nuke your system.</p>
<p>I like to use my main user and skip creating a special user for development. For this blog post we shall call him Bob. Bob is cool. On my system he is called Vishesh.</p>
<pre><code>$ mkdir ~/kde
</code></pre>
<p>Everything goes in this <code>~/kde</code> directory. This is where our entire environment will reside.</p>
<pre><code>$ mkdir ~/kde/.setup
</code></pre>
<p>The <code>.setup</code> folder is where the code for which sets up the environment goes. I split my environment based on environment variables and convenience functions.</p>
<p>Create the first file <code>~/kde/.setup/env</code></p>
<pre><code>#!/bin/bash

export KF5=~/kde
export KDEDIR=~/kde
export KDE_SESSION_VERSION=5

export XDG_DATA_DIRS=$KF5/share:/usr/share
export XDG_CONFIG_DIRS=$KF5/etc/xdg:/etc/xdg

export PATH=$KF5/bin:$PATH
export QT_PLUGIN_PATH=$KF5/lib/plugins:$KF5/lib/x86_64-linux-gnu/plugins:$QT_PLUGIN_PATH

export QML2_IMPORT_PATH=$KF5/lib/qml:$KF5/qml:$KF5/lib/x86_64-linux-gnu/qml:$QTDIR/qml

export CMAKE_PREFIX_PATH=$KF5
export PKG_CONFIG_PATH=$KDEDIR/lib/pkgconfig:/usr/lib/pkgconfig
export LD_LIBRARY_PATH=$KDEDIR/lib:/usr/lib
</code></pre>
<p>Create the second file <code>~/kde/.setup/functions</code></p>
<pre><code>#!/bin/bash
export KDE_BUILD=$KDEDIR/build
export KDE_SRC=$KDEDIR/src


# Make sure build directory exists.
mkdir -p &quot;$KDE_BUILD&quot;
mkdir -p &quot;$KDE_SRC&quot;

function ck {
        local srcFolder current

        srcFolder=`pwd | sed -e s,$KDE_BUILD,$KDE_SRC,`
        current=`pwd`
        if [ &quot;$srcFolder&quot; = &quot;$current&quot; ]; then
                cb
        fi

        cmake &quot;$srcFolder&quot; -DCMAKE_INSTALL_PREFIX=$KDEDIR \
            -G Ninja \
            -DPYTHON_SITE_PACKAGES_DIR:PATH=~/.local/lib/python2.6/site-packages \
            -DCMAKE_BUILD_TYPE=&quot;Debug&quot; \
            -DPYTHON_EXECUTABLE:FILEPATH=&quot;/usr/bin/python2&quot; \
            -DCMAKE_INSTALL_PREFIX=$KDEDIR \
            -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ \
            -DCMAKE_EXPORT_COMPILE_COMMANDS=ON \
            -DCMAKE_CXX_FLAGS=&quot;-Weverything -Wno-c++98-compat -Wno-c++98-compat-pedantic -Wno-exit-time-destructors -Wno-padded -Wno-sign-conversion -Wno-documentation -Wno-undefined-reinterpret-cast -fcolor-diagnostics -Wno-shorten-64-to-32 -Wno-conversion -Wno-gnu-zero-variadic-macro-arguments -Wno-shadow&quot;
            # C++ 98 - It was about 17 years ago
            # no-undefined-reinterpret-cast -&gt; This is because moc files typically use reinterpret casts
            # Padded - Nothing much that can be done. Also, it's annoying
            # Documentation - Maybe we should care about this one?
            # Sign Conversion - It's annoying, but maybe we should care about this.
            # -fcolor-diagnostics - For ninja coloured output
            # Conversion + shorten -&gt; Cause they are annoying and I just ignore them. Bad Vishesh!
            # gnu-zero-variadic-macro -&gt; When using qCDebug()
            # -Wno-shadow -&gt; Just too many warnings

        ninja &amp;&amp; ninja install
        RETURN=$?
        cs
        return ${RETURN}
}

function ckgcc {
        local srcFolder current

        srcFolder=`pwd | sed -e s,$KDE_BUILD,$KDE_SRC,`
        current=`pwd`
        if [ &quot;$srcFolder&quot; = &quot;$current&quot; ]; then
                cb
        fi

        cmake &quot;$srcFolder&quot; -DCMAKE_INSTALL_PREFIX=$KDEDIR \
            -G Ninja \
            -DPYTHON_SITE_PACKAGES_DIR:PATH=~/.local/lib/python2.6/site-packages \
            -DCMAKE_BUILD_TYPE=&quot;Debug&quot; \
            -DPYTHON_EXECUTABLE:FILEPATH=&quot;/usr/bin/python2&quot; \
            -DCMAKE_INSTALL_PREFIX=$KDEDIR \

        # nice make -j4 &amp;&amp; make install
        ninja &amp;&amp; ninja install
        RETURN=$?
        cs
        return ${RETURN}
}

function cb {
        local dest
        dest=`pwd | sed -e s,$KDE_SRC,$KDE_BUILD,`
        mkdir -p &quot;$dest&quot;
        cd &quot;$dest&quot;
}

function cs {
        cd `pwd | sed -e s,$KDE_BUILD,$KDE_SRC,`
}
</code></pre>
<h3 id="step-4---get-the-source">Step 4 - Get the source</h3>
<p>All my source code goes in <code>~/kde/src/</code>. Look for the project you want to contribute to either on <a href="https://projects.kde.org/">projects.kde.org</a>. The code is also on <a href="https://github.com/KDE/">github</a>. This is a read only mirror so the typical github workflow will not work. I will still look at your github pull request, but other KDE developers might not.</p>
<p>Lets take the example of Baloo.</p>
<pre><code>$ mkdir -p ~/kde/src
$ cd ~/kde/src
$ git clone git://anongit.kde.org/baloo
</code></pre>
<h3 id="step-5---activate-the-environment">Step 5 - Activate the Environment</h3>
<p>The environment can be activated by sourcing those two special files we created.</p>
<pre><code>$ source ~/kde/.setup/env
$ source ~/kde/.setup/functions
</code></pre>
<p>This needs to be done each time you open a new terminal session. Later we&rsquo;ll see how we can make this even simpler.</p>
<h3 id="step-6---project-dependencies">Step 6 - Project Dependencies</h3>
<p>Every project has its own list of dependencies. This part is not easy to automate and requires you to install all of them. You can either compile some of them yourselves, or install them through your package manager. As a starting point I would recommend just using your package manager. Do not compile Qt.</p>
<p>Most distros split up packages into the normal package and <code>-devel</code>. You need to install the <code>-devel</code> version of the dependency. Arch Linux is awesome, and does not split them.</p>
<h3 id="step-7---lets-build-it">Step 7 - Lets build it!</h3>
<pre><code>$ cd ~/kde/src/baloo
$ ck
</code></pre>
<p>That&rsquo;s it. This will run 3 steps - <code>cmake</code>, <code>ninja</code> and <code>ninja install</code>. If you insist on using gcc instead of clang then run <code>ckgcc</code> instead. Let me explain each of these steps.</p>
<p><code>cmake</code> is a build system which we typically use. This means we use it to figure out what all needs to be compiled, what flags should be used, where the dependencies are, etc. With our scripts its output goes in a special build directory <code>~/kde/build/baloo</code>.</p>
<p><code>ninja</code> (or make): This command typically looks for a Ninja file (or MakeFile). It is the actual step which compiles your entire application. It can be run by going into the build directory and running <code>ninja</code>. The <code>ck</code> command automatically does this for you. If you get a compile error, you should run this command instead of running <code>ck</code> and starting from scratch.</p>
<p><code>ninja install</code>: This command installs all the files in the correct location. For us the location is <code>~/kde</code>. We do not want to mess up our root environment. This command is also run in the build directory.</p>
<h3 id="step-8---running-the-project">Step 8 - Running the project</h3>
<p>If this all worked out, the project should be compiled and installed. You can run the project manually by calling the correct executable. This executable is in your <code>~/kde/bin</code> directory. This directory is in your <code>PATH</code> environment variable, so just running the executable will find it.</p>
<h3 id="step-9---jumping-around">Step 9 - Jumping around</h3>
<p>The <code>functions</code> file has a few convenience methods. <code>cb</code> and <code>cs</code>. These stand for &lsquo;change to build` and &lsquo;change to source&rsquo;. They can be run at any point of jump to the build and source directory respectively. It&rsquo;s quite handy since certain commands need for you to be in certain directories.</p>
<p>That&rsquo;s about it. I could write more on how to activate the environment more easily and how to make sure your IDE uses this environment as well, but I&rsquo;m tired, and sleepy. It is 2 AM. Good Night.</p>
<p>Here is a more detailed link - <a href="https://techbase.kde.org/Getting_Started/Build/Environment">https://techbase.kde.org/Getting_Started/Build/Environment</a></p>
</div>
    <div class="post__footer">
      

      
        <span><a class="tag" href="/tags/planetkde/">planetkde</a></span>




      
    </div>

    
  </div>


      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Vishesh Handa
        2022


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js"
    integrity="sha256-o/0GOK2k487Ch&#43;SaYEtKgoz&#43;8zpmmv5guWV1dh//XPM="
    crossorigin="anonymous"
  ></script></body>
</html>
