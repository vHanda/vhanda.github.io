<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
  class="html"
><head>
  <title>
    
      Vishesh Handa
        |
        Nepomuk - Simplifying the debugging process


      


    
  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.95.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Vishesh Handa" />
  <meta
    name="description"
    content="
      Haven&#39;t figured out a description


    "
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.5259d55db7b9c675f751f0865411bd84a410f3ffcb5105b8fc00b22fcb739309.css"
      integrity="sha256-UlnVXbe5xnX3UfCGVBG9hKQQ8//LUQW4/ACyL8tzkwk="
      crossorigin="anonymous"
      type="text/css"
    />

  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css"
    integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.69685904d5c2a0c6258d03c207b778c10466edf6cea928cc0164c376b0ad0930.css"
    integrity="sha256-aWhZBNXCoMYljQPCB7d4wQRm7fbOqSjMAWTDdrCtCTA="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.6d585e78d28cce1200d39fb133c92ed83df01738da721d0f48fb6eac62d24e04.css"
    integrity="sha256-bVheeNKMzhIA05&#43;xM8ku2D3wFzjach0PSPturGLSTgQ="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.6b00d96498d59caa0dbcf9b49d30d821915291f2ceb0e19248523c8607ff43fa.css"
    integrity="sha256-awDZZJjVnKoNvPm0nTDYIZFSkfLOsOGSSFI8hgf/Q/o="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

  <link rel="canonical" href="http://vhanda.in/blog/2013/03/Nepomuk-Simplifying-the-debugging-process/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.560a26330d27ff44a44e83b53cd07a95d4230a65930d31c5c76a8d481e5b35bf.js"
      integrity="sha256-VgomMw0n/0SkToO1PNB6ldQjCmWTDTHFx2qNSB5bNb8="
      crossorigin="anonymous"
    ></script>

  

  


  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Nepomuk - Simplifying the debugging process"/>
<meta name="twitter:description" content="When something goes wrong in Nepomuk, its easy for us Nepomuk developers to track it down, but for other developers and users it can be quite hard. Even simple things like reporting which component is malfunctioning isn&rsquo;t completely obvious.
Over the last month, we have simplified some of the external details and added tools which will help us debug your problems so that we can fix things more easily. These all will be shipped with nepomuk-core in 4."/>



  
  <meta property="og:title" content="Nepomuk - Simplifying the debugging process" />
<meta property="og:description" content="When something goes wrong in Nepomuk, its easy for us Nepomuk developers to track it down, but for other developers and users it can be quite hard. Even simple things like reporting which component is malfunctioning isn&rsquo;t completely obvious.
Over the last month, we have simplified some of the external details and added tools which will help us debug your problems so that we can fix things more easily. These all will be shipped with nepomuk-core in 4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://vhanda.in/blog/2013/03/Nepomuk-Simplifying-the-debugging-process/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2013-03-21T22:36:55+00:00" />
<meta property="article:modified_time" content="2013-03-21T22:36:55+00:00" /><meta property="og:site_name" content="Vishesh Handa" />




  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "blog",
        "name": "Nepomuk - Simplifying the debugging process",
        "headline": "Nepomuk - Simplifying the debugging process",
        "alternativeHeadline": "",
        "description": "
      
        When something goes wrong in Nepomuk, its easy for us Nepomuk developers to track it down, but for other developers and users it can be quite hard. Even simple things like reporting which component is malfunctioning isn\u0026rsquo;t completely obvious.\nOver the last month, we have simplified some of the external details and added tools which will help us debug your problems so that we can fix things more easily. These all will be shipped with nepomuk-core in 4.


      


    ",
        "inLanguage": "en-us",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/vhanda.in\/blog\/2013\/03\/Nepomuk-Simplifying-the-debugging-process\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Vishesh Handa"
        },
        "creator" : {
            "@type": "Person",
            "name": "Vishesh Handa"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Vishesh Handa"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Vishesh Handa"
        },
        "copyrightYear" : "2013",
        "dateCreated": "2013-03-21T22:36:55.00Z",
        "datePublished": "2013-03-21T22:36:55.00Z",
        "dateModified": "2013-03-21T22:36:55.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Vishesh Handa",
            "url": "http://vhanda.in",
            "logo": {
                "@type": "ImageObject",
                "url": "http:\/\/vhanda.infavicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
      ]

    ,
        "url" : "http:\/\/vhanda.in\/blog\/2013\/03\/Nepomuk-Simplifying-the-debugging-process\/",
        "wordCount" : "642",
        "genre" : [ ],
        "keywords" : [ 
      
      "planetkde"

    
      
        ,

      
      "nepomuk"

    ]
    }
  </script>



</head>
<body
    
      class="body theme--light"

    
  >
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"

        
      ><div
  class="sidebar
    animated fadeInDown

  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/blog/images/2015/08/16/vhanda.jpg"
        alt="profile picture"
      />
      <h1 class="sidebar__introduction-title">
        <a href="/">Vishesh Handa</a>
      </h1>
      <div class="sidebar__introduction-description">
        <p>Haven't figured out a description</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a href="https://www.linkedin.com/in/visheshhanda/" rel="me" aria-label="Linkedin" title="Linkedin">
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a href="https://github.com/vhanda" rel="me" aria-label="GitHub" title="GitHub">
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a href="https://twitter.com/visheshhanda" rel="me" aria-label="Twitter" title="Twitter">
            <i class="fab fa-twitter fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a href="mailto:me@vhanda.in" rel="me" aria-label="e-mail" title="e-mail">
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Vishesh Handa
        2022


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js"
    integrity="sha256-o/0GOK2k487Ch&#43;SaYEtKgoz&#43;8zpmmv5guWV1dh//XPM="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main
        
          class="wrapper__main"

        
      >
        <header class="header"><div
  class="
    animated fadeInDown

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>

      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown

    "
  >
    
    <div class="post__content">
      <h1>Nepomuk - Simplifying the Debugging Process</h1>
      <p>When something goes wrong in Nepomuk, its easy for us Nepomuk developers to track it down, but for other developers and users it can be quite hard. Even simple things like reporting which component is malfunctioning isn&rsquo;t completely obvious.</p>
<p>Over the last month, we have simplified some of the external details and added tools which will help us debug your problems so that we can fix things more easily. These all will be shipped with nepomuk-core in 4.11</p>
<h1 id="nepomuk2service2">Nepomuk2::Service2</h1>
<p>Nepomuk, like most modular architectures, has a number of different plugins or as we like to call them &ldquo;services&rdquo;. Traditionally each service would be installed as a library that would be loaded by the <code>nepomukservicestub</code> process. When most users would try to provide debugging information they mostly just provide the process name - nepomukservicestub. This doesn&rsquo;t tell us much, since all the heavy lifting is done by the nepomuk services. The client libraries are mostly just light wrappers.</p>
<p>With the 4.10 release we have 3 major services -</p>
<ul>
<li>Storage Service</li>
<li>File Watch Service</li>
<li>File Indexing Service</li>
</ul>
<p>Each can be started by calling the <code>nepomukservicestub</code> along with the service name. Eg - <code>nepomukservicestub nepomukfilewatch</code>.</p>
<p>Currently in master, we have moved away from this approach and each service now installs its own process. So you should no longer see any nepomukservicestubs. Instead you&rsquo;ll see a <code>nepomukstorage</code>, <code>nepomukfilewatch</code> and <code>nepomukfileindexer</code> process.</p>
<p>This greatly simplifies the debugging process as the users can easily report which process is problematic, and starting a service is just a matter of running the correct executable.</p>
<h1 id="tools">Tools</h1>
<p>Restarting Nepomuk and looking into the database has traditionally required some dbus commands. These commands were always apparent to us developers, but it&rsquo;s good to have some standard ways of managing Nepomuk.</p>
<h2 id="nepomukctl">NepomukCtl</h2>
<p>Thanks to <a href="http://g-poesia.blogspot.in/2013/02/hello-planet.html">Gabriel</a>, we now have <code>nepomukctl</code> which acts very similar to the <code>akonadictl</code>. It can be easily used to start, stop and restart Nepomuk or any individual service.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ nepomukctl start
</span></span><span style="display:flex;"><span>$ nepomukctl restart
</span></span><span style="display:flex;"><span>$ nepomukctl restart fileindexer</span></span></code></pre></div>
<p>This is a great tool to check if Nepomuk is actually running.</p>
<h2 id="nepomuk-show">Nepomuk Show</h2>
<p>In order to view the data inside the Nepomuk database one typically needs to issue a query. This requires the developers to know SPARQL. Typically users do not want to go into so much effort when they are debugging simple stuff.</p>
<p>Now <code>nepomukshow</code> can be used to easily view the resource information.</p>
<pre tabindex="0"><code class="language-trig" data-lang="trig">$ nepomukshow Politik.mp3

&lt;nepomuk:/res/94e816c8-2466-4172-9bcd-0b9129cd17f8&gt;
  rdf:type            nmm:MusicPiece
  rdf:type            nfo:FileDataObject
  rdf:type            nfo:Audio
  rdf:type            nie:InformationElement
  nao:created         2013-03-21T18:06:54Z
  nao:lastModified    2013-03-21T18:06:57Z
  nie:url             file:///home/vishesh/Music/Coldplay/Politik.mp3
  nie:mimeType        audio/mpeg
  nie:title           Politik
  nie:lastModified    2009-08-20T11:58:04Z
  nie:contentCreated  2002-03-21T18:06:54Z
  nie:created         2011-11-21T15:32:52Z
  nfo:averageBitrate  1.2800000000e+05
  nfo:sampleRate      4.4100000000e+04
  nfo:fileSize        5088374
  nfo:fileName        Politik.mp3
  nfo:channels        2
  nfo:duration        318
  nmm:performer       nepomuk:/res/8ffe10cc-c375-485f-8f00-b1d5b211ae7f
  nmm:trackNumber     1
  nmm:genre           20
  nmm:musicAlbum      nepomuk:/res/22c13ad9-f234-4e60-910a-9159b47cd290
  kext:indexingLevel  2</code></pre>
<p>This is a great tool to use to see what all information has been indexed about a file or if a file has been indexed at all. It can even be used to check if an email has been indexed, though the syntax is a little different.</p>
<pre tabindex="0"><code class="language-trig" data-lang="trig">$ nepomukshow &#39;akonadi:?item=39618&#39;

&lt;nepomuk:/res/b8ef2a3f-9112-4dfb-9071-4b1ce7544b1b&gt;
  rdf:type            aneo:AkonadiDataObject
  rdf:type            nmo:Email
  nao:created         2012-12-11T10:29:20Z
  nao:hasSymbol       internet-mail
  nie:isPartOf        &lt;akonadi:?collection=44&gt;
  nie:byteSize        3998
  nie:url             &lt;akonadi:?item=39618&gt;
  nmo:isRead          1
  nmo:to              nepomuk:/res/cbee003e-7a36-4dd3-8978-c71c7c91d359
  aneo:akonadiItemId  39618
  nmo:messageSubject  Re: proposals marked as to be accepted in Melange now
  nmo:sentDate        2011-04-18T16:45:59Z
  nmo:from            nepomuk:/res/b900fd2e-dacf-4395-bb72-6c9ed78f5b71
  nmo:messageId       &lt;BANLkTikYWvzvGCM4-N0cOw0NdVdO8BmOpg@mail.gmail.com&gt;</code></pre>
<h2 id="nepomukcmd">NepomukCmd</h2>
<p>Most developers already know of <code>nepomukcmd</code> which was an alias on top of <code>sopranocmd</code>. It could be used to query Nepomuk and contained many more soprano specific features which are now no longer applicable.</p>
<p>We are now shipping our own <code>nepomukcmd</code> tool, which currently only supports sparql queries. It does however support a neat <code>--inference</code> option which can be used to selectively enable and disable inferencing.</p>
<p>These tools right now are in a very early, simple but working state and could use some polishing, and extra features in the future. Contributing to these would be a great way to get involved in Nepomuk. Message me for more details.</p>
</div>
    <div class="post__footer">
      

      
        <span><a class="tag" href="/tags/planetkde/">planetkde</a><a class="tag" href="/tags/nepomuk/">nepomuk</a></span>




      
    </div>

    
  </div>


      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Vishesh Handa
        2022


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js"
    integrity="sha256-o/0GOK2k487Ch&#43;SaYEtKgoz&#43;8zpmmv5guWV1dh//XPM="
    crossorigin="anonymous"
  ></script></body>
</html>
